{"ast":null,"code":"var _jsxFileName = \"C:\\\\denis\\\\nts\\\\src\\\\App.js\";\nimport React from \"react\";\nimport Info from \"./components/info\";\nimport Search from \"./components/search\";\nimport Results from \"./components/results\";\nimport Edit from \"./components/edit\";\nimport Create from \"./components/create\";\nimport FormSearch from \"./components/formSearch\";\nimport AddNote from \"./components/addNote\";\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      notes: []\n    };\n\n    this.listOfNotes = async e => {\n      e.preventDefault();\n      const ddd = e.target.city.value;\n      const bodyMsg = {\n        textNote: \"%\"\n      };\n      const api_url = await fetch(\"http://127.0.0.1:8080/message?textNote=\" + JSON.stringify(bodyMsg), {\n        cache: 'no-cache'\n      });\n      const data = await api_url.json();\n      data.sort((a, b) => {\n        return b.id - a.id;\n      });\n      this.setState({\n        notes: data\n      });\n    };\n\n    this.addNote = async e => {\n      console.log(\"добавим\");\n      e.preventDefault();\n      const bodyMsg = {\n        dateNote: \"\",\n        urgencyNote: \"\",\n        textNote: \"\"\n      };\n      const api_url = await fetch(\"http://127.0.0.1:8080/message\", {\n        method: 'POST',\n        cache: 'no-cache',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(bodyMsg)\n      });\n      const data = await api_url.json();\n      this.state.notes.push(data);\n      this.state.notes.sort((a, b) => {\n        return b.id - a.id;\n      });\n      this.setState(this.state.notes);\n    };\n\n    this.deleteNote = async (e, idNoteToDel) => {\n      //  deleteNote(e) {\n      e.preventDefault();\n      console.log(\"delete \", this, e, idNoteToDel);\n      const api_url = await fetch(\"http://127.0.0.1:8080/message/\" + idNoteToDel, {\n        method: 'DELETE',\n        cache: 'no-cache',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }); //console.log(\"index\" + index);\n\n      let notes = this.state.notes;\n      this.state.notes.forEach(function (item, index, array) {\n        //console.log(\"index\" + index + \"; \" + item.id);\n        if (item.id == idNoteToDel) {\n          //console.log(\" удалю index\" + index + \"; \" + item.id);\n          notes.splice(index, 1);\n        }\n      });\n      notes.forEach(function (item, index, array) {\n        console.log(\"index\" + index + \"; \" + item.id);\n      });\n      this.setState(notes);\n    };\n\n    this.edtNote = async (e, userIdNote, userUrgencyNote, userTextNote) => {\n      console.log(\"изменим \", userIdNote, userUrgencyNote, userTextNote);\n      e.preventDefault();\n      const bodyMsg = {\n        id: userIdNote,\n        dateNote: null,\n        urgencyNote: userUrgencyNote,\n        textNote: userTextNote\n      };\n      const api_url = await fetch(\"http://127.0.0.1:8080/message/\" + userIdNote, {\n        method: 'PUT',\n        cache: 'no-cache',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(bodyMsg)\n      });\n      const data = await api_url.json();\n      let notes = this.state.notes;\n      this.state.notes.forEach(function (item, index) {\n        //console.log(\"index\" + index + \"; \" + item.id);\n        if (item.id == userIdNote) {\n          //console.log(\" удалю index\" + index + \"; \" + item.id);\n          notes[index] = data;\n        }\n      });\n      this.setState(this.state.notes);\n    };\n  }\n\n  render() {\n    console.log(\"5555this.state.notes \" + this.state.notes);\n    console.log(\"this.state.v\" + this.state.testValue);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(Info, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(FormSearch, {\n      weatherMethod: this.listOfNotes,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(AddNote, {\n      noteAdd: this.addNote,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), React.createElement(Edit, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), React.createElement(Create, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(Search, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }), React.createElement(Results, {\n      notes: this.state.notes,\n      deleteNote: this.deleteNote,\n      edtNote: this.edtNote,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/denis/nts/src/App.js"],"names":["React","Info","Search","Results","Edit","Create","FormSearch","AddNote","App","Component","state","notes","listOfNotes","e","preventDefault","ddd","target","city","value","bodyMsg","textNote","api_url","fetch","JSON","stringify","cache","data","json","sort","a","b","id","setState","addNote","console","log","dateNote","urgencyNote","method","headers","body","push","deleteNote","idNoteToDel","forEach","item","index","array","splice","edtNote","userIdNote","userUrgencyNote","userTextNote","render","testValue"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Info from \"./components/info\"\r\nimport Search from \"./components/search\"\r\nimport Results from \"./components/results\"\r\nimport Edit from \"./components/edit\"\r\nimport Create from \"./components/create\"\r\nimport FormSearch from \"./components/formSearch\";\r\nimport AddNote from \"./components/addNote\"\r\n\r\n\r\nclass App extends React.Component {\r\n\r\n    state = {\r\n        notes: []\r\n    }\r\n\r\n    // список заметок\r\n    listOfNotes = async (e) => {\r\n        e.preventDefault();\r\n        const ddd = e.target.city.value;\r\n        const bodyMsg = {textNote: \"%\"};\r\n        const api_url = await fetch(\"http://127.0.0.1:8080/message?textNote=\"+JSON.stringify(bodyMsg),\r\n            {cache: 'no-cache'});\r\n        const data = await api_url.json();\r\n\r\n        data.sort((a, b) => {\r\n            return b.id - a.id\r\n        });\r\n\r\n        this.setState({notes: data});\r\n    }\r\n\r\n    // добавить заметку\r\n    addNote = async (e) => {\r\n        console.log(\"добавим\");\r\n        e.preventDefault();\r\n        const bodyMsg = {dateNote: \"\", urgencyNote: \"\", textNote: \"\"};\r\n        const api_url = await fetch(`http://127.0.0.1:8080/message`,\r\n            {\r\n                method: 'POST', cache: 'no-cache',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify(bodyMsg)\r\n            });\r\n\r\n        const data = await api_url.json();\r\n        this.state.notes.push(data);\r\n        this.state.notes.sort((a, b) => {\r\n            return b.id - a.id\r\n        });\r\n\r\n        this.setState(this.state.notes);\r\n    }\r\n\r\n    // удалить заметку\r\n    // строка для тестирования:\r\n    // fetch('http://127.0.0.1:8080/message/1', {method: 'DELETE', hearders: {'Content-Type': 'application/json'}}).then(result=>console.log(result))\r\n    deleteNote = async (e, idNoteToDel) => {\r\n        //  deleteNote(e) {\r\n        e.preventDefault();\r\n        console.log(\"delete \", this, e, idNoteToDel);\r\n\r\n        const api_url = await fetch(\"http://127.0.0.1:8080/message/\" + idNoteToDel,\r\n            {\r\n                method: 'DELETE', cache: 'no-cache',\r\n                headers: {'Content-Type': 'application/json'}\r\n            });\r\n\r\n        //console.log(\"index\" + index);\r\n        let notes = this.state.notes;\r\n\r\n        this.state.notes.forEach(function (item, index, array) {\r\n            //console.log(\"index\" + index + \"; \" + item.id);\r\n            if (item.id == idNoteToDel) {\r\n                //console.log(\" удалю index\" + index + \"; \" + item.id);\r\n                notes.splice(index, 1);\r\n            }\r\n        });\r\n\r\n        notes.forEach(function (item, index, array) {\r\n            console.log(\"index\" + index + \"; \" + item.id);\r\n        });\r\n\r\n        this.setState(notes);\r\n\r\n    }\r\n\r\n    // редактировать заметку\r\n    edtNote = async (e, userIdNote, userUrgencyNote, userTextNote) => {\r\n        console.log(\"изменим \", userIdNote, userUrgencyNote, userTextNote);\r\n        e.preventDefault();\r\n        const bodyMsg = {id: userIdNote, dateNote: null, urgencyNote: userUrgencyNote, textNote: userTextNote};\r\n        const api_url = await fetch(\"http://127.0.0.1:8080/message/\" + userIdNote,\r\n            {\r\n                method: 'PUT', cache: 'no-cache',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify(bodyMsg)\r\n            });\r\n\r\n        const data = await api_url.json();\r\n\r\n        let notes = this.state.notes;\r\n\r\n        this.state.notes.forEach(function (item, index) {\r\n            //console.log(\"index\" + index + \"; \" + item.id);\r\n            if (item.id == userIdNote) {\r\n                //console.log(\" удалю index\" + index + \"; \" + item.id);\r\n                notes[index] = data;\r\n            }\r\n        });\r\n\r\n        this.setState(this.state.notes);\r\n    }\r\n\r\n    render() {\r\n\r\n        console.log(\"5555this.state.notes \" + this.state.notes);\r\n        console.log(\"this.state.v\" + this.state.testValue);\r\n\r\n        return (\r\n            <div>\r\n                <Info/>\r\n                <FormSearch weatherMethod={this.listOfNotes}/>\r\n                <AddNote noteAdd={this.addNote}/>\r\n\r\n                <Edit/>\r\n                <Create/>\r\n                <Search/>\r\n                <Results notes={this.state.notes}\r\n                         deleteNote={this.deleteNote}\r\n                         edtNote={this.edtNote}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}